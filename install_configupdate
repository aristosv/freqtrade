#!/bin/bash

readconfig () {
 cat /usr/local/$botname/config.json
}

botname=$(basename "$PWD")
stake_currency=$(readconfig | jq -cr '.stake_currency')
display_currency=$(readconfig | jq -cr '.fiat_display_currency')
stake_amount=$(readconfig | jq -cr '.stake_amount')
max_open_trades=$(readconfig | jq -cr '.max_open_trades')
exchange_name=$(readconfig | jq -cr '.exchange | .name')
exchange_key=$(readconfig | jq -cr '.exchange | .key')
exchange_secret=$(readconfig | jq -cr '.exchange | .secret')
telegram_token=$(readconfig | jq -cr '.telegram | .token')
telegram_chatid=$(readconfig | jq -cr '.telegram | .chat_id')
webuser=$(readconfig | jq -cr '.api_server | .username')
webpass=$(readconfig | jq -cr '.api_server | .password')
webport=$(readconfig | jq -cr '.api_server | .listen_port')
ipaddress=$(readconfig | jq -cr '.api_server | .listen_ip_address')
secretkey=$(readconfig | jq -cr '.api_server | .jwt_secret_key')

echo Bot Name: $botname
echo Stake Curency: $stake_currency
echo Display Currency: $display_currency
echo Stake Amount: $stake_amount
echo Max Open Trades: $max_open_trades
echo Exchange Name: $exchange_name
echo Exchange Key: $exchange_key
echo Exchange Secret: $exchange_secret
echo Telegram Token: $telegram_token
echo Telegram Chat ID: $telegram_chatid
echo FreqUI Username: $webuser
echo FreqUI Password: $webpass
echo Listen Port: $webport
echo Listen IP Address: $ipaddress
echo Secret Key: $secretkey

sed -i "s/\$max_open_trades/$max_open_trades/" /usr/local/$botname/config.json
